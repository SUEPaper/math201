<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper docs-doc-page docs-version-current plugin-docs plugin-id-default docs-doc-id-python/numpy/broadcast">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v2.4.0">
<title data-rh="true">5. 广播(Broadcast) | 数值计算方法训练</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:url" content="https://suepaper.github.io/math201/python/numpy/broadcast"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="5. 广播(Broadcast) | 数值计算方法训练"><meta data-rh="true" name="description" content="本文参考:"><meta data-rh="true" property="og:description" content="本文参考:"><link data-rh="true" rel="icon" href="/math201/img/logo.png"><link data-rh="true" rel="canonical" href="https://suepaper.github.io/math201/python/numpy/broadcast"><link data-rh="true" rel="alternate" href="https://suepaper.github.io/math201/python/numpy/broadcast" hreflang="en"><link data-rh="true" rel="alternate" href="https://suepaper.github.io/math201/python/numpy/broadcast" hreflang="x-default"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.13.24/dist/katex.min.css" integrity="sha384-odtC+0UGzzFL/6PNoE8rX/SPcQDXBJ+uRepguP4QkPCm2LBxH3FA3y+fKSiJ+AmM" crossorigin="anonymous"><link rel="stylesheet" href="/math201/assets/css/styles.af68718c.css">
<link rel="preload" href="/math201/assets/js/runtime~main.7ddc3c1c.js" as="script">
<link rel="preload" href="/math201/assets/js/main.6f42869f.js" as="script">
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}return t}()||function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/math201/"><b class="navbar__title text--truncate">Math 201: 数值计算方法训练</b></a><a class="navbar__item navbar__link" href="/math201/labs/">课程实验</a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/math201/python/">Python</a><a class="navbar__item navbar__link" href="/math201/latex/">LaTeX</a><a class="navbar__item navbar__link" href="/math201/git/">Git代码管理</a></div><div class="navbar__items navbar__items--right"><a class="navbar__item navbar__link" href="/math201/notes/learn">推荐材料</a><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="Switch between dark and light mode (currently light mode)" aria-label="Switch between dark and light mode (currently light mode)" aria-live="polite"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="searchBox_ZlJk"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0 docsWrapper_BCFX"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docPage__5DB"><aside class="theme-doc-sidebar-container docSidebarContainer_b6E3"><div class="sidebarViewport_Xe31"><div class="sidebar_njMd"><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/math201/python/">关于Python</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/math201/category/安装">安装</a><button aria-label="Toggle the collapsible sidebar category &#x27;安装&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/math201/python/pip">包管理</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/math201/python/jupyter">Jupyter Notebook 介绍</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/math201/python/debug">VS Code Debug Python</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/math201/python/variable">变量、表达式和语句</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/math201/python/control">控制语句</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/math201/python/function">函数和高阶函数</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/math201/python/loop">循环和迭代</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/math201/python/recursion">递归</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/math201/category/数据结构">数据结构</a><button aria-label="Toggle the collapsible sidebar category &#x27;数据结构&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/math201/category/面向对象编程">面向对象编程</a><button aria-label="Toggle the collapsible sidebar category &#x27;面向对象编程&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active" aria-expanded="true" href="/math201/category/numpy教程">NumPy教程</a><button aria-label="Toggle the collapsible sidebar category &#x27;NumPy教程&#x27;" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/math201/python/numpy/">1. 简介与安装</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/math201/python/numpy/vector">2. 向量(Vector): 一维数组</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/math201/python/numpy/matrix">3. 矩阵(Matrix): 二维数组</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/math201/python/numpy/tensor">4. 张量(Tensor): 多维数组</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/math201/python/numpy/broadcast">5. 广播(Broadcast)</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/math201/python/numpy/exercises">6. 练习题</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/math201/category/matplotlib教程">Matplotlib教程</a><button aria-label="Toggle the collapsible sidebar category &#x27;Matplotlib教程&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/math201/python/scipy">SciPy 教程</a></li></ul></nav></div></div></aside><main class="docMainContainer_gTbr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/math201/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_YNFT"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item"><a class="breadcrumbs__link" itemprop="item" href="/math201/category/numpy教程"><span itemprop="name">NumPy教程</span></a><meta itemprop="position" content="1"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">5. 广播(Broadcast)</span><meta itemprop="position" content="2"></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><h1>5. 广播(Broadcast)</h1><p>本文参考: </p><ol><li><a href="https://towardsdatascience.com/broadcasting-in-numpy-58856f926d73" target="_blank" rel="noopener noreferrer">Broadcasting in NumPy</a></li></ol><h2 class="anchor anchorWithStickyNavbar_LWe7" id="1-什么是广播">1. 什么是广播?<a href="#1-什么是广播" class="hash-link" aria-label="Direct link to 1. 什么是广播?" title="Direct link to 1. 什么是广播?">​</a></h2><p>广播可以简单理解为用于不同大小数组的二进制通用函数(加、减、乘等)的一组规则。这是一个非常强大的功能，但是通常较难理解。
当数组大小彼此不匹配的时候，我们通常会从错误消息中看到广播的存在。</p><p>最简单的广播示例是n维数组乘以标量，这显然意味着该数组的所有元素乘以标量值：</p><p><img loading="lazy" src="data:image/png;base64,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" width="1220" height="210" class="img_ev3q"></p><p>广播类似于众所周知的<strong>类型提升</strong>：在大多数编程语言中，一个整数和一个浮点数进行运算时，整数会首先自动转换为浮点数类型。</p><p>在二维数组中（例如，将矩阵除以向量），广播有点棘手，因为操作的结果取决于操作数的特定形状：
<img loading="lazy" src="/math201/assets/images/numpy-broadcast-02-a9462c9c8bd6207d80ed46c6af6b5530.png" width="1057" height="638" class="img_ev3q"></p><p>在三维数组及更高维度的数组中，广播甚至更不直观，使用它需要了解通用形式的广播规则。
<img loading="lazy" src="data:image/png;base64,UklGRnAfAABXRUJQVlA4IGQfAABQtgCdASpiA+IAPrVWpE4nJKuiIjU7kXAWiWVu+Esn+Jlro9zPIvzO+rSe24Peu+x/uvXr/Zd3N5p/NL9MP+T6Zr1Xf636i3S5f4XJiPLH999VPh1+S8PfIL8Sksd8uo18l+8H7f/De2H9y/3Pgr8T/871AvZP63eRj/ldrbrf+m/4HqEe3P1j/r/2nx/fn71I/Rf8r7AHlD/1fC8/H+oP5Mv+T+2noh+u/YM6Z5OWXLyIb9IiQmHH0NH5CtNfopJLh931XWDbsJBZ7oSsyqzx4wOI0Aha+E36BJJLgfH196x+sPtBLwpyiqtqH3VEmTPhMeMDiM9wReqsCSXPA5jM2WjAWRFYaLQOZw3po74zu3mbLSVie5GS0iwfQEMAixHxuPNv2fGGLkTBH+8W/sFGWMSNBjO3eLSMvBBuBHjzGw05IsdKToIo0wJvdce5UkkaAQwNz+j5sJ47BZMorV59RA7iWumqja9RyX5Lc2z3vgLHXxOqWv/ftHKQm9FQlQU0HkxECMoozNTA33DATGMJ8siH6LkEMGWcUMKrzObaqxjludpyhIQjYJXR4MecLTfctLDrQJKFJHtXUsIz3LxryYiA4NYlLi4B89kARWAB3EupJNC774RAx++yfDXi/Db44Ah/YzW15MRAjfAOHfo5VONITR2NA2yTTz+7YWZudHbXq5kJw6ew/Z/dpSqrPHjA4jQB8lPfOP1VXZxexxdnYmzDhKPEJZIkE0BDA4jQCGATfoB8VjNVKl1s7HYY+m819zZV6GmXmEITT/5Q5s15MRAjfAECvm/EcLFxrpZeobx05CN9L2qXTqvaixgwIA1foCoUcb6Bx2RZcIAFODrJcPy/vEztdQI3wDiL9Sas1L5tuUejOoS7bZcX12Wi8pqQB4sQAuziDDWGQ/2Wc9tDqCOloB2KW6JKU3NRGgnR1AsyBxDro/7+8D7ryYiBG958nWfyI9z2l+fhkTJIIJMNIWUW8b4i0k15MRAjfAOKvgTSJnX898n4inzuXAmVfunPpsJCas3aaNVnjxgcRfXpTeJCYsA52++87/og1ozPfQSB5MRAjfAOI0AhgcOlsQSMIo9JIfTJkwJGytrrj/s1UZNJ9vgHEaAQuC1/yzQZNrQDLCHVjVyo3bAH9H7VteYBlapLdh5OGSo1Nax2Fe2GON9EgfXGUYpbPsd2ePGBvlyFWD7ckj4R+YgHXGgrJ5Jph+GIpi3H64NrZdjyAc83ETyApw7cgve82NGxmjqRIZVqSmxTpmiq61ziZznBcssMOWryD3IB9dkUBDA4jP+36x7R1c1+2PMYki5t/bKfrdGAQ6jC2z7ZE1zF/JZmFRGgEMDiLrnfSt55+qNOK3Zjcxz55o4bg4qqa1sYN22T9+E6BG+AbRKGY/am2k7g+vof6+h/EYa8xypEaAQwOI0AhYvcETy95TkeWWVi6ccuFEf59Cgy9C2syqzx30GrvPnH3NrDpk6AxK3R2l92dZ6Mo9ugsOMCNFQEYOQrPQkpHP8NbQHEaAQsooRfVf4YnfuWP+rr0BZbUxQVMO6nghYlHTYgTDzC9GBJjb06ZirgUfTkkyBDNbXkjHNiDsuoezGIM4Zttq+Bi5GkY2O8ixAAbzam1UunOelKKZQBTJdbI6v9f/Ue2o8AU6P/pwrOxl532SKNsESwXGY3gAWgZlGorRRdNG9XyOagNotS14NjRH62VMDXc4iOSArVQzJjv64SkyLJZAvTmB+SBTh7qysFKmNfeWsorAaCwA63XMGB3lw3srF+c+Lp0AsAGplqCgKDRw8RRitGx3kI3wDaKZNQnbSyMBXhBnKVDOLm6OkJC6pMM6/gWrsl8NVPOhSZ62J9da12+hkHcCHeQC/b9omr+4C1MUQZ551SFvGms7Bja0RLJV/E+VQKBG+AcRoCzu1ra9sFpJryYiBG+AcRoBDA4q+A9rDiNAIYAgAA/vzXqVW3l4N+OctWkTLxAY6uW8dbC0MT/j5JM4nmE3oS5yFMo8kxo2X8AL+nOI3108YnlXTimeUNtByAkfY5CV9bSbzgQDJ6BiFe3MI6BMbSZDnue/1TqVdXGMZx1CTTisygAAImZCt0MwJQm5ScMnVvXrl4cVLyv1ekG/zP1aZ+wfWa52u/sbOQAJNuy9Vi8I0aYVKPN/xAd2d7AnczlOlEhSkdDMlBACgKNpHcSjwsZv86w7dSNSO2DikD9t1spzUcaiMGj1EYNHqIwMhu0Erv1GMVUZ6S4JhXhmTPab+vAKiPOXc1FFSQZNtLqL06zfIEaRPKD6uakNGHeRtZi4NQQAYeimi3kZoKW/tj1oFiwJ/EOgvibVFuWnqrdeM3vBX8ducKEXR94Cl20QIoEtR6BiBwJ3wnZOM5LQmZ8GRUoDxjSr40PRMtWFx/AzKHNbkNKEI4TBDTgmx1y0eqNwJu/uOWU16qMITDE2Gdcto/UxQU7PYa62JaOmp5rX09nCatUYB2GOwv8V4xPg4i95NemJH+Ugvsruu7I+NZ3xmqhGfzZ/oc03BLMnB14ggc2L/t1fqgO4rTiJFsoeGizHRNb9gSlQMSxYp0raQ0G3BvinMMO3GnLV8d4/36CUmDeG/+oy3H+QWJ5mMbQ28qcU2u/QJ4cJClqUEi93QY2j6ABHGORoAaj6ABaQaaWt5r84sQPEWxMjk+gQHm1rgy2oCttPIamSb29x4AlZe29okSRxmg7nX43B2e0YQboH3QfNOFdW7FJsOGUtIIiVb3IPQYg2r4fnC6zcvajDPCkSZYNIupG6eoXC0Mwc/aTLe0nPWdhBE//7v3vpAK1sv94Y6R+X6AmeXOgHERq+ykjQSbkGDmtywiriwNQqaNiwfx8sbgCWv3cHv4T9gEfKdEURvAkBQPFsXHNHvxlZUsyh3TZ6o2S06LvHmobZRx61apxAhAU0t+W1J0j/9fRuLqrRz+Okh9Kvg/SZyhNPowjy9MpSHMYQq4usnO6saF2HkZzhWBwudQ9+3rkGLUtY55BBGvhii9/44T5wtakPtJWMJSX7YVN9Je+HdZXrE9hVNpq/dOe+QEljBLk5j7452Qr2g5x7SNAgeKqCDUn/qWc1IlrTHOdNOs8FN2uwaVwN0QuRJi4734ensp1MpTNXDueZYAAe/PACy5fbqWmbrxHvYumA2+UgxLuoaROKDubVqy7MdrbtUATYgsMwBIyltKPv7J1ZYW1w8dTqVYlAuYEVHqYHUkCya3J7sT2/ziiFR6/i9K1b7NxHS6yCGbEGrMEeLEdvqUvQC9f7sXEbm4v5S/yKUa2QPtBaIxnyQ0yRNGY1fEfxybNkDeXVes9qBQz3IP9RIcp+7ImyUi+rUrOsX0xSKOaedJg4w2RIXXYCxrc5FUsVabsFNe/StPXpoE/frvvpJo5dCr8s3Itf/6Fh+Z8vHvspye18OaJKumB1UVMS+ihYzUQlW0Az5VII/R4XpMzkHJ23X6ohrHrbnsQPFC67NmIIX1T8HbOM1qgumazH7wHQlqCtPGACuDVL5kVgUXoL4+wrlXigtKWgMBx9I1xnbt5ooUBimB2PE8y9NgtWmJlPsgTFvk5atgYq1ziXGnBF4soQuocz0sC6bVZa3055MhWNJULxtxtfMF0oRg0N56DAU8STOMnQ98JlBtAGzJJnjP1B6KLZj/tWycMnEmUg0yKvxquJHwTXB/d3ZOwAvl+G91WWqgZVUT3Bw7L3yr0N9izbhPJiG6xD7xh3gfqc2NchLFwC9sdBO4o2gwXpi2l7GvZJZluyOVpcl6s+RTikvzIC2wSvPjHSMhGWd9RlXMwUfCGfwu/nGOnpuKNFCGg48CLAp8w0UqcsF6tRkGmOu6N96vrB60hYW/LUI1SJ23cTrfXwE0TqZKJdibHj68np7kL/arkXEueewYVFe5Q8XmJfGl1iAPU7EpxC69UB3IXTFnQ5wWb+L54XyGQQQOy9JHeR2macGjy2Sh29NTZhPZlQ0H4XC9PpDWTypOgg/SBrBbhLThZ+QKgpr4uzu+QaPtwWmHdZGQCgrHQXoP4b8oRdnsn/oa+fACYm9dmRdL5yv5BIA/RoKSoDYD5dopUES+UxhWVmSpsHiZMYpby2T+NWK2j+/L+HLmgjSvLtP3iyV1Kc1DgpJ91GlOxgW68356KiRwSZBcDrzRcm/pGM8lVndAs357eaLbF+9NNalxYIDY8oSXGNhbXVL8frkHakhaGEr1TBW2AJClJQzrE6OR2PFrtxrY54bWD91UwRFMgmeGdQCIeoVj9QaMYRRBDwy4YNBez3RpU84d95jyBpaO6wFOCbGpu1bC9NiLV0GNOXxnnlZTmTepTOHR3ScCHJyGSA3AR/SNeGJ8AuT1gDL2DqemUHAAhWDMKYYHFBTVF3wXG/uD0zsdkhWbchgEPGY07dMPsQEYrjSJsHpSSWwJwIzpp9MdCCV6VTY/0ZhitPQKcjM8qROSKIXVLZWzSw9+6QKnzf5LqO/L6nzg+IM0yT1h3CRLVAEuGj4D0pu8ZmOabglmQ9T24V5hI00hDKXUAGKAANeH6E4eRU+t89k0sA3O8Ap2trRu52ds86Zs9YzJZaUj3/KLL2tloNaX4J5OhTJpH6vO70/ckJ/iatDloSpI68uu37GNsN81q46ALyla2/cDQFQZAMNX+O7UQs6w5SR0cr0Uxe8H1NlZ+EKqivzIVeoH5qZEY3g/aarJ53zwi0r5xGlxZghPrZR8cXlUgtck8AAgY2jLsxw0fCnOGSKE3Ld8URNZhxPsc/NLKo2XwuHXCGX7188VSfQCYVpHpS2+U8aH31ElgUp9kcicvIb7/pZnVytjZo7LolupItP2lG5cRZMfU8S08C7VlU0x6DjgBtwNxh0h8R0SD2RLuew2MYFX8zjd9TA8IcQBgdUr5xv1FyMvglw0OU1pGRIqa6sEcEdxNm7uVVtfmX3BpEbWYGTePCqIgLBq4svSs65nDMtBOF3F5WHW5bSmBMuNp1Qciu8vs2RZbbJhlb0bWDHzDa8YVHCklMQap5Vo2ig7aqc6cpQJWzwUs35c/Dvgh/9q3daeTuBpZqjxLg6K94tcDAHYE4hLUEJBw6hmAP2dVp+vwFhmb5fFqSqZuR9J6ECumuOFEXBa+yfIwXnhoKSTo/6jZ81rcnU3rdgUJ0WUgDV5GaIc1nrzqk1yiKm74G+F7vkWGnd+Gt8lgq3EvsEj5FP1mMrPzZoAr7zFEM144kKzKXIONsEtWAmorqkPZmthz/Bc7coAgZwpehRO79BDlNfa4YDtRnlkyKC4k0/o+6Fl0kqoPev+oUWLXco8y/V/J35y7Bpl9VfMr3ZtqvIL8PbfgaCWX7P6mh42IInq7UP8k8Uhzd0SzgQ6nvW5JJ0fFRCz8he+VYh1R1KN5L6TThpQ49V8dZQe7QwcBAQYKpRB/Qjq0gThUOliTKiGXjZ2BV62l6edNcmem98dfvSfV1xfPSSz9G3HP6j3zsFngJpVZ9+zdeY3W63fQ5Io/vp+LGi5KirdahTe97lj23FA61NAdmQwScY033GdpnV0bV+TU5OLuwNljHfZsiGYdxWTo1Kakl+r+BllWL3mp9JcNQuKU++FEJE123Wb4qiXFljE3fQtORBVAPwABt0GpPnPYkGlO1RWI+1ydx5FWhgQ5LsgFK9MVJQtTI0JIo8CmEnzIKBbRTNyQPSWKDGveszWC1be1Cmax34UhWxE6SuTJZPyh8pDusZt8byc8t1b7/mK6nWQMdgQLalv6LaBe8KPFWkkIPmoDAcEax+vSqllxe+vKaCV/CVbC8pJxhksb/vUyQj36ibIHDSbiquuqXOuiVrar7UUOAXP8KlQgCNCTK+OEdpxKx3AX6Pbv9Uvf6kUMKzBluBSiR8LZyHvZJ3fUgo970L0KTsXU1DSpFfXR5Pa807935tIJTW9OW77gATMmg4N1b50OoT1xiHuX/0ugKw2S5mA0f1kM+0sgrU8B6xuMlUkYvOAvm2wJBXGhJ4Q29lUXMDhA0rzHCU3jnGZtaVbr12QKVwAYeABbC6kSVO+cGfrD7F+AWV8MVLlcz7oaFZ73w+A8uqU8N39X56V46IhnnpffzDfAz2H3CPpF4h7DqpXEdPauEPwA71s6umN4ZKaoVErRXcYhaC0I3uOgcl5qv4zHgq1wPo8xgbpC97vaVHhScQgtO3UNFYHEdZBFVQm2rWXJb12NwzUehphqwUb2f+VjSwCj3RUBT+0xw+8qSIiqLG9AvcWdf5Raxf0AxxywjVfgAAHKXAlXYk9iAtkKVbOMRwkUGrMxkaAel3LOMOhYtVjv+og7VJZ6lQktjKcbJwdwMvopU9QFWtOVuS6evgoHBig4h5tG20gUhpu9IMgAv7nQCVlZBONy0GfdYOIF/V6oqvlV/nNZM/WhltQhPnIe147zKkpkPCRTbSzoOCpuGsEb27uwAS7t2RrHode2rb8icz61Dt2euyCZMwK6fRhqxzezoSTuLhbxIW4MwqIZdnEJlFNqAf5eyzgQdnJ75j/mb73AQh7Rlm5rV4WOJZwSUcEkxXU68yf2JCGOr+7mSpTa4FG/IMriw+NB7Dxxlo9n80z60z+1tFL/gWsBKEo8Os+OmhJ9yj0A3dk4CLKNgRaZkmfX2uw3RIjp8U4UGt8PSR4C12NdIWRhZJ9ozlW+fBfPJ+GMrLMUXgxkEdHUa//nvqBSQksHBiTAa23OaecWfNxh56+tvUO0havwS7Y5O3+5kwXdMLqQ0jFRORQ8RkW2TNpC4tmVk/S7ITm9EZV0KyclxRT+Z7BBFhGWBewJctgsQugZaooMz6eZxKnISjgzmkVrdmkJZmNorORyCrzL/HfT6W1pfd2VFGixtZxblrlyZRDsJLPa8Mwz5jwITrZGRZrv75qndLStzWhGIUhiTjsDnwZqXuGXxkjseCDASh6k6YPaef6wJdfMoOO77jR+nYgBPez56+EDEafTLPewE0VLHSErKWBMTmW0fDVto0NbQLqSB8uRtVvVRQoXLmTbelugErTqMOjVPyL0dBGrZ456V7P9Ypf7HGu1JojACezy6mpZdymMeGLJN10zyy290Ytn3NM+DCJey3VcDHIHfLsyN/DNzb0smj/HnAOFM/8qcbD1fYqNVBvxRZx8GDWI9J2tbTj44jN4/zUXa/z5nnc3BxZ9r9d6YBkZMrxCJ4Hug1AARcyR/S8zSc0dvhxHGN/8OM+OSvka7zDEi1Uw+/6JJrum8sEyIOrugZ1T1FCuygup8VtNdSFwLsZoE3hHdnD5n/8eaEtBF9T2JUXMtYN/krkWUXUJPpw0LXGRMQmCz9+r8qCsnc6NafhAB085RQz9kpzm5fKQALTwSkx4OOlKvq4Nyrzn2Rp/j4j9aXXbvrC+npaLxNTMwmMUzdWEPHWyMT+5vWpYdoRFjiaptaL6j7ZyzFMLGMXDJKawo5Fo2cqjOk6SrpKtrZW15NZ3HkkmneFQet9WQ8yWzg7Bq1WOCqLd3gfjD0IEMAPFBCqL4i6bo4MZNx/VfmfZ47I5YX9AWOYKzCP3zG8M0tajtLcxR1Fu8yzdcfCSxa3ntfx5lJho5WQdugCb+hc9JI3jbnIwj1tV3a3NNJAJy1yfMKNxEWkIhm1T3WNkivbmAwnAbnrxlv8JH8g4Xlz+R4lz83PglsyM4LrZV7T/drLQf/fWrcjSan2/5OnsmZmkfT7h/PP1SCm+n0AAf3jgQRWRdeNPXkF1xeXRpbtFpwhtt6di+ul8a+y5vjc5f5teola+Rk2f2z3yKw8NPf9p8BYqJdKgpEV1RgBFxo9hX3izQ7I296/IUYpPJ4oyPQFJ+9BVebtI75zOlnE/xxThMqxaT5B13F5F+GAMbYbGIMehiVIux976ytbMh3DEgOJ60FPH1HHJS3OFTJhZJk67M4uHNJdTqrr1EAAMkHsf9moyTipWDGS5pPe60uPE4UbJi7CHUJcAcuEB0bXdt3hX6BlLg1040HoQuHTVHwb8W7YBNM+QXrlsJQcwDVcdwOKT4ox7UTQYeUhGnLvYMEUDiXx2drbznGbFelBamFg7/qBHqKIL89VO4suCAAkR3ARnlNVyQf6rr9/85gAAK/6a9H8YsCLVk0GMKoWx1Ji0E+yRwzQmY6oljRhRtQTC1/AHA+iM2kFwAQ8RUIJoH32oWYnqAyprDBIgyPnC0vEVOW69Fmagr6nVCIzxip9y880lT47CBQzMiHCAKHq+6n6E+E4kLRuwnKSWAaUbkcjpqR9+TyKo/qjMD1EyUeb+2FZ9aF9z782eAAB06jEKGFyHwlIiE3mKiL5f4fZWtJhIbTPdE4McHeiZhVx5YvusqtD9QnZA/TNKNdAM2NuvDtrhH1VV1zLLCAHGGRYwv78BaDW0PJ1Qx2zL27xc0nEhtzynNku3QXU6AJeRFivHaXV4jM4NuG9q5AIax5nyM17Yu/8ugX0v9qesJjsPInztFcjbBunVMBzqtKgeiLJQ6hNjYk6lNcBxPOWtfYeRhdWgq90xVbE+y9zHE2EB7AHiW2kcl00KD3AJxhN/h8vueJQgnllGfjn7OISKVh6ZBpbDQ0QWdihbEXSpNlfA9OJ5Q8pGibqnEBwT6xcgSJcF6eOXjcz9wy3L6FzLFTMp6F1XpKdqCGuqhjGE8iq11eLSC4o2n0PNKIYyY06X5k2gOqQrz2e4UE7lynsbLRZlaqDTNtUXV/uTZlOu97Q+bor/u6IAn1lILo8NkLY9HVgYCUsfxEhXBQd6Yk/mMVIZTQ0ITBVYw+3XdwQP/67LFaHNpV4qIPmNZH4oWlUrQU7TpclcrgwPxlJqmaz978k2L16OyYpUfkUdb8wm1sa+Ue3zkQnKluBfejhggn5P3RvNqiDgg3f+veOXtFJcvT2NB+tUAs8i5SddjlBw+m2zQS94KH2/S3tm7kSxLgjewg91N39yA5irsmIeoRZKyYCY6IS3kGs/wqtKRV88z9iVUXVHMnY10yogDQFZJNsktL3UYBhcPocY3b7DTN4kLLrlOn/auiMKIYw7evzJoiXhL9UdCm8aD9KDKlZ7x8V8cp065uFHyA79j3r2AgfxIFhooykD9dMvfkhqtvMDyBIXf34oUv0+zmFG0qo07p2aBzBnFHjoiE1su2V9AaB++wur+49VGXmngPicoZOPEt7p9zgdw6wWy3NgI2OBzitaJG0s2DxNr3NZbM5o4WJEh9v6eRfIW4ur1GvTudqLiZopwtUXbQC0m+w5Id7lh/Jnh5FsfjflbTAqtvpVaRpNOYLuZ56sRyMEEATz8czr0ziKKxwDvEY1sPuRR5bGQir9uS/pcBeUJmGS/GNqmQbXdjtBfZXiJwt0VOpm1NStbObE3qGBAnA6UCQTYzgtQE4u6HGY4IN8SVEmAr8x2q1AhMGNcZYJkaG3GRREWqILysk9Ul8vtYSFwzk2jeneIC1SoKccGnButjs6UxVjuzvW8Gjqa9m1xXjxGwqyovhFO/SfL3+HKXsDoyfbmfj0mKr+rXAipPrOmZePSmE7DK+duhlFy6T8TK4kIMJ9ifvY0sDqYcfkBEdj4E8FJLZFFKHiwpxB4EEi95w9H2MZrZ75FPUC3lXv+xjTJK/9ywxmA453ILjt2QSIOcahu/EgROeNEep0GgtlXepDrYuuCKdtZ2m1baOA3Uw7h/jHuAtC2PPaJBmW87SuGFEJa3D7bf6Yg/I/zOHA0vugtKZgG8G79F/gvOPLLkj+HPn6JvB7scWvinFwTf5QlhTA34EL79J9dowA7ImtITPtyl520j6k7kDH84LgYDpczHarSIZj2p/PuKxZRm5BJvpfy4UDaeDGyGf6/hJ9uiJF9PvmnbQTcBDVOTqenqwAvWyqVv5Qmodxmcebqn/wLsDFJbvKhiwRmIvdUAxrO/kqFiHFSZdLCJ08NAkK9HfvBg9aK+fC9MkLjjd2XufoTQYC1EQcULBePtuAbva/25sQNTgz23SgTMmZEBY4GXb3h/HEJR8i+RLMWbh/Q0CTji5IzdfXUWc5PBtG8oktbaScKlsnSBVssYXmNQ7fRh5Lw8nUpZeyBfVQSOEmOcwYibBecnZUk/XhtGP+G+rwtDCDr8vfTrQ65Ve4KvslRGNC7TKIBvuYnMZdhMlBujrKvs15DAjklhvdJGGtCQe9AzSQuvO4og5CB8Ly8QtwdmVZbaPr8WJsBUc6h5fzxXloPwEtX070zT6tc/q/ZWecfw9WL5yhL6t/Rrc/heKKMiHWJXT+zjI416L9UTnWSG+TFqlj9LUu399pFS0WwXTRltcRjVhGPnvDiALj9Nn77SXnH4lKBKjWRdwo6uPjwnkZ0FL243De246dKebIt8jcAUwg4G4lvwu5nv5Cde+jYJ0B3ymrcpTUbJ569KiJoZ1uPuXpJwaPEFduLefqjMm01PQfOOJZk6R9aGgP5s9mY+0i7M/P6b6r/4xImMe7ORbzo7DTLBDZFZBEeI/KMfOOuUDthjMFh3RNveAcLZ2GXmodosIi9Eh67Ux9Lzo9O3Dl5glIJHeQkAbg+poVw4MjlQxqOIKE5QO5E6TDYnlEQTBeTPDYeTfx7+pvQ5/ReVaT1lxHFCsEL5kJgNCMhrjw8LrCKieKzd94AC67ycACNgBmAzJPhnEvNlS8uzqOQLRq6RD/hf0l6fQlkzmKnwt5qkx99OwkAOpP6x3FkgFO8hwNZ8Qc7Pa5EC2roAXIxd+rq29+CNsUsT9gEkTgAAAAA17X3AAAAAAAA==" width="866" height="226" class="img_ev3q"></p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="2-广播的规则">2. 广播的规则<a href="#2-广播的规则" class="hash-link" aria-label="Direct link to 2. 广播的规则" title="Direct link to 2. 广播的规则">​</a></h2><p>在NumPy三维以上中，广播机制很不直观，甚至很难直白的理解，因此使用它需要了解通用形式的广播规则，而NumPy的广播遵循证实遵循着一组严格的规则。</p><div class="theme-admonition theme-admonition-caution alert alert--warning admonition_LlT9"><div class="admonitionHeading_tbUL"><span class="admonitionIcon_kALy"><svg viewBox="0 0 16 16"><path fill-rule="evenodd" d="M8.893 1.5c-.183-.31-.52-.5-.887-.5s-.703.19-.886.5L.138 13.499a.98.98 0 0 0 0 1.001c.193.31.53.501.886.501h13.964c.367 0 .704-.19.877-.5a1.03 1.03 0 0 0 .01-1.002L8.893 1.5zm.133 11.497H6.987v-2.003h2.039v2.003zm0-3.004H6.987V5.987h2.039v4.006z"></path></svg></span>caution</div><div class="admonitionContent_S0QG"><ul><li>规则一：如果两个数组的维度数不相同，那么小维度数组的形状将会在最左边补1。</li><li>规则二：如果两个数组的形状在任何一个维度上都不匹配，那么数组的形状会沿着维度为1的维度扩展以匹配另外一个数组的形状。</li><li>规则三：如果两个数组的形状在任何一个维度上都不匹配并且没有任何一个维度等于1，那么会引发异常。
来源于 -- <a href="https://www.oreilly.com/library/view/python-data-science/9781491912126/" target="_blank" rel="noopener noreferrer">《Python Data Science Handbook》</a></li></ul></div></div><p>根据规则之前三维数组的案例可解释如下：
<img loading="lazy" src="data:image/png;base64,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" width="867" height="162" class="img_ev3q"></p><p>为了更清楚地理解这些规则，来看几个具体的示例。</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="示例1">示例1<a href="#示例1" class="hash-link" aria-label="Direct link to 示例1" title="Direct link to 示例1">​</a></h3><div class="language-python codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-python codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv codeBlockLinesWithNumbering_o6Pm"><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> numpy </span><span class="token keyword" style="color:#00009f">as</span><span class="token plain"> np</span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain" style="display:inline-block"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">M </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> np</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">ones</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">2</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">3</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">a </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> np</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">arange</span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">3</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain" style="display:inline-block"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain"></span><span class="token keyword" style="color:#00009f">print</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">M </span><span class="token operator" style="color:#393A34">+</span><span class="token plain"> a</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain"></span><span class="token keyword" style="color:#00009f">print</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">M</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">shape</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain"></span><span class="token keyword" style="color:#00009f">print</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">a</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">shape</span><span class="token punctuation" style="color:#393A34">)</span></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">[[1. 2. 3.]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> [1. 2. 3.]]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">(2, 3)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">(3,)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><div class="theme-admonition theme-admonition-tip alert alert--success admonition_LlT9"><div class="admonitionHeading_tbUL"><span class="admonitionIcon_kALy"><svg viewBox="0 0 12 16"><path fill-rule="evenodd" d="M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"></path></svg></span>tip</div><div class="admonitionContent_S0QG"><p>M.shape = (2, 3)</p><p>a.shape = (3,)</p></div></div><p>可以看到，根据规则1， 数组a的维度数更小，所以在其左边补1：</p><div class="theme-admonition theme-admonition-tip alert alert--success admonition_LlT9"><div class="admonitionHeading_tbUL"><span class="admonitionIcon_kALy"><svg viewBox="0 0 12 16"><path fill-rule="evenodd" d="M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"></path></svg></span>tip</div><div class="admonitionContent_S0QG"><p>M.shape -&gt; (2, 3)</p><p>a.shape -&gt; (1, 3)</p></div></div><p>根据规则2， 第一个维度不匹配，因此拓展这个维度以匹配数组：</p><div class="theme-admonition theme-admonition-tip alert alert--success admonition_LlT9"><div class="admonitionHeading_tbUL"><span class="admonitionIcon_kALy"><svg viewBox="0 0 12 16"><path fill-rule="evenodd" d="M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"></path></svg></span>tip</div><div class="admonitionContent_S0QG"><p>M.shape -&gt; (2, 3)</p><p>a.shape -&gt; (2, 3)</p></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="示例2">示例2<a href="#示例2" class="hash-link" aria-label="Direct link to 示例2" title="Direct link to 示例2">​</a></h3><div class="language-python codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-python codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv codeBlockLinesWithNumbering_o6Pm"><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> numpy </span><span class="token keyword" style="color:#00009f">as</span><span class="token plain"> np</span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain" style="display:inline-block"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">a </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> np</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">arange</span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">3</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">reshape</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">3</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">b </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> np</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">arange</span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">3</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain" style="display:inline-block"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain"></span><span class="token keyword" style="color:#00009f">print</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">a </span><span class="token operator" style="color:#393A34">+</span><span class="token plain"> b</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain"></span><span class="token keyword" style="color:#00009f">print</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">a</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">shape</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain"></span><span class="token keyword" style="color:#00009f">print</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">b</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">shape</span><span class="token punctuation" style="color:#393A34">)</span></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>规则1告诉我们，需要用1将b的形状补全:</p><div class="theme-admonition theme-admonition-tip alert alert--success admonition_LlT9"><div class="admonitionHeading_tbUL"><span class="admonitionIcon_kALy"><svg viewBox="0 0 12 16"><path fill-rule="evenodd" d="M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"></path></svg></span>tip</div><div class="admonitionContent_S0QG"><p>a.shape -&gt; (3, 1)</p><p>b.shape -&gt; (1, 3)</p></div></div><p>规则2告诉我们，需要更新这两个数组的维度来互相匹配:</p><div class="theme-admonition theme-admonition-tip alert alert--success admonition_LlT9"><div class="admonitionHeading_tbUL"><span class="admonitionIcon_kALy"><svg viewBox="0 0 12 16"><path fill-rule="evenodd" d="M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"></path></svg></span>tip</div><div class="admonitionContent_S0QG"><p>a.shape -&gt; (3, 3)</p><p>b.shape -&gt; (3, 3)</p></div></div><p>因为结果匹配，所以这两个形状是兼容的，可以看到一下结果: </p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">[[0 1 2]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> [1 2 3]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> [2 3 4]]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">(3, 1)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">(3,)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="示例3">示例3<a href="#示例3" class="hash-link" aria-label="Direct link to 示例3" title="Direct link to 示例3">​</a></h3><p>现在来看一个两组不兼容的示例:</p><div class="language-python codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-python codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv codeBlockLinesWithNumbering_o6Pm"><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> numpy </span><span class="token keyword" style="color:#00009f">as</span><span class="token plain"> np</span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain" style="display:inline-block"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">M </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> np</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">ones</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">3</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">2</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">a </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> np</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">arange</span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">3</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain" style="display:inline-block"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain"></span><span class="token keyword" style="color:#00009f">print</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">M </span><span class="token operator" style="color:#393A34">+</span><span class="token plain"> a</span><span class="token punctuation" style="color:#393A34">)</span></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>和第一个示例相比，这里有个微小的不同之处： 矩阵M是转置的。那么这将如何影响计算呢？两个数组的形状如下:</p><div class="theme-admonition theme-admonition-tip alert alert--success admonition_LlT9"><div class="admonitionHeading_tbUL"><span class="admonitionIcon_kALy"><svg viewBox="0 0 12 16"><path fill-rule="evenodd" d="M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"></path></svg></span>tip</div><div class="admonitionContent_S0QG"><p>M.shape = (3, 2)</p><p>a.shape = (3,)</p></div></div><p>规则1告诉我们，a数组的形状必须用1进行补全：</p><div class="theme-admonition theme-admonition-tip alert alert--success admonition_LlT9"><div class="admonitionHeading_tbUL"><span class="admonitionIcon_kALy"><svg viewBox="0 0 12 16"><path fill-rule="evenodd" d="M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"></path></svg></span>tip</div><div class="admonitionContent_S0QG"><p>M.shape -&gt; (3, 2)</p><p>a.shape -&gt; (1, 3)</p></div></div><p>根据规则2，a数组的第一个维度进行扩展以匹配M的维度：</p><div class="theme-admonition theme-admonition-tip alert alert--success admonition_LlT9"><div class="admonitionHeading_tbUL"><span class="admonitionIcon_kALy"><svg viewBox="0 0 12 16"><path fill-rule="evenodd" d="M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"></path></svg></span>tip</div><div class="admonitionContent_S0QG"><p>M.shape -&gt; (3, 2)</p><p>a.shape -&gt; (3, 3)</p></div></div><p>现在需要用到规则3——最终的形状还是不匹配，因此这两个数组是不兼容的。当我们执行运算时会看到以下结果：</p><div class="language-python codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-python codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token operator" style="color:#393A34">-</span><span class="token operator" style="color:#393A34">-</span><span class="token operator" style="color:#393A34">-</span><span class="token operator" style="color:#393A34">-</span><span class="token operator" style="color:#393A34">-</span><span class="token operator" style="color:#393A34">-</span><span class="token operator" style="color:#393A34">-</span><span class="token operator" style="color:#393A34">-</span><span class="token operator" style="color:#393A34">-</span><span class="token operator" style="color:#393A34">-</span><span class="token operator" style="color:#393A34">-</span><span class="token operator" style="color:#393A34">-</span><span class="token operator" style="color:#393A34">-</span><span class="token operator" style="color:#393A34">-</span><span class="token operator" style="color:#393A34">-</span><span class="token operator" style="color:#393A34">-</span><span class="token operator" style="color:#393A34">-</span><span class="token operator" style="color:#393A34">-</span><span class="token operator" style="color:#393A34">-</span><span class="token operator" style="color:#393A34">-</span><span class="token operator" style="color:#393A34">-</span><span class="token operator" style="color:#393A34">-</span><span class="token operator" style="color:#393A34">-</span><span class="token operator" style="color:#393A34">-</span><span class="token operator" style="color:#393A34">-</span><span class="token operator" style="color:#393A34">-</span><span class="token operator" style="color:#393A34">-</span><span class="token operator" style="color:#393A34">-</span><span class="token operator" style="color:#393A34">-</span><span class="token operator" style="color:#393A34">-</span><span class="token operator" style="color:#393A34">-</span><span class="token operator" style="color:#393A34">-</span><span class="token operator" style="color:#393A34">-</span><span class="token operator" style="color:#393A34">-</span><span class="token operator" style="color:#393A34">-</span><span class="token operator" style="color:#393A34">-</span><span class="token operator" style="color:#393A34">-</span><span class="token operator" style="color:#393A34">-</span><span class="token operator" style="color:#393A34">-</span><span class="token operator" style="color:#393A34">-</span><span class="token operator" style="color:#393A34">-</span><span class="token operator" style="color:#393A34">-</span><span class="token operator" style="color:#393A34">-</span><span class="token operator" style="color:#393A34">-</span><span class="token operator" style="color:#393A34">-</span><span class="token operator" style="color:#393A34">-</span><span class="token operator" style="color:#393A34">-</span><span class="token operator" style="color:#393A34">-</span><span class="token operator" style="color:#393A34">-</span><span class="token operator" style="color:#393A34">-</span><span class="token operator" style="color:#393A34">-</span><span class="token operator" style="color:#393A34">-</span><span class="token operator" style="color:#393A34">-</span><span class="token operator" style="color:#393A34">-</span><span class="token operator" style="color:#393A34">-</span><span class="token operator" style="color:#393A34">-</span><span class="token operator" style="color:#393A34">-</span><span class="token operator" style="color:#393A34">-</span><span class="token operator" style="color:#393A34">-</span><span class="token operator" style="color:#393A34">-</span><span class="token operator" style="color:#393A34">-</span><span class="token operator" style="color:#393A34">-</span><span class="token operator" style="color:#393A34">-</span><span class="token operator" style="color:#393A34">-</span><span class="token operator" style="color:#393A34">-</span><span class="token operator" style="color:#393A34">-</span><span class="token operator" style="color:#393A34">-</span><span class="token operator" style="color:#393A34">-</span><span class="token operator" style="color:#393A34">-</span><span class="token operator" style="color:#393A34">-</span><span class="token operator" style="color:#393A34">-</span><span class="token operator" style="color:#393A34">-</span><span class="token operator" style="color:#393A34">-</span><span class="token operator" style="color:#393A34">-</span><span class="token operator" style="color:#393A34">-</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">ValueError                                Traceback </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">most recent call last</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Cell In</span><span class="token punctuation" style="color:#393A34">[</span><span class="token number" style="color:#36acaa">5</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> line </span><span class="token number" style="color:#36acaa">6</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token number" style="color:#36acaa">3</span><span class="token plain"> M </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> np</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">ones</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">3</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">2</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token number" style="color:#36acaa">4</span><span class="token plain"> a </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> np</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">arange</span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">3</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token operator" style="color:#393A34">-</span><span class="token operator" style="color:#393A34">-</span><span class="token operator" style="color:#393A34">-</span><span class="token operator" style="color:#393A34">-</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">6</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">print</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">M </span><span class="token operator" style="color:#393A34">+</span><span class="token plain"> a</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">ValueError</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> operands could </span><span class="token keyword" style="color:#00009f">not</span><span class="token plain"> be broadcast together </span><span class="token keyword" style="color:#00009f">with</span><span class="token plain"> shapes </span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">3</span><span class="token punctuation" style="color:#393A34">,</span><span class="token number" style="color:#36acaa">2</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">3</span><span class="token punctuation" style="color:#393A34">,</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><div class="theme-admonition theme-admonition-danger alert alert--danger admonition_LlT9"><div class="admonitionHeading_tbUL"><span class="admonitionIcon_kALy"><svg viewBox="0 0 12 16"><path fill-rule="evenodd" d="M5.05.31c.81 2.17.41 3.38-.52 4.31C3.55 5.67 1.98 6.45.9 7.98c-1.45 2.05-1.7 6.53 3.53 7.7-2.2-1.16-2.67-4.52-.3-6.61-.61 2.03.53 3.33 1.94 2.86 1.39-.47 2.3.53 2.27 1.67-.02.78-.31 1.44-1.13 1.81 3.42-.59 4.78-3.42 4.78-5.56 0-2.84-2.53-3.22-1.25-5.61-1.52.13-2.03 1.13-1.89 2.75.09 1.08-1.02 1.8-1.86 1.33-.67-.41-.66-1.19-.06-1.78C8.18 5.31 8.68 2.45 5.05.32L5.03.3l.02.01z"></path></svg></span>danger</div><div class="admonitionContent_S0QG"><p>请注意，这里可能发生的混淆在于：</p><p><strong>你可能想通过在a数组的右边补1，而不是左边补1，让a和M的维度变得兼容。但是这不被广播的规则所允许。</strong></p></div></div><h2 class="anchor anchorWithStickyNavbar_LWe7" id="3-实际案例">3. 实际案例<a href="#3-实际案例" class="hash-link" aria-label="Direct link to 3. 实际案例" title="Direct link to 3. 实际案例">​</a></h2><p>将彩色图像转换为灰度图像是三维数组广播的一个很好的例子。根据sRGB颜色空间的公式：</p><div class="math math-display"><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><msub><mi>Y</mi><mrow><mi>l</mi><mi>i</mi><mi>n</mi><mi>e</mi><mi>a</mi><mi>r</mi></mrow></msub><mo>=</mo><mn>0.2126</mn><mo>×</mo><msub><mi>R</mi><mrow><mi>l</mi><mi>i</mi><mi>n</mi><mi>e</mi><mi>a</mi><mi>r</mi></mrow></msub><mo>+</mo><mn>0.7152</mn><mo>×</mo><msub><mi>G</mi><mrow><mi>l</mi><mi>i</mi><mi>n</mi><mi>e</mi><mi>a</mi><mi>r</mi></mrow></msub><mo>+</mo><mn>0.0722</mn><mo>×</mo><msub><mi>B</mi><mrow><mi>l</mi><mi>i</mi><mi>n</mi><mi>e</mi><mi>a</mi><mi>r</mi></mrow></msub></mrow><annotation encoding="application/x-tex">Y_{linear} = 0.2126 \times R_{linear} + 0.7152 \times G_{linear} + 0.0722 \times B_{linear}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8333em;vertical-align:-0.15em"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.22222em">Y</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3361em"><span style="top:-2.55em;margin-left:-0.2222em;margin-right:0.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.01968em">l</span><span class="mord mathnormal mtight">in</span><span class="mord mathnormal mtight">e</span><span class="mord mathnormal mtight">a</span><span class="mord mathnormal mtight" style="margin-right:0.02778em">r</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2778em"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em"></span></span><span class="base"><span class="strut" style="height:0.7278em;vertical-align:-0.0833em"></span><span class="mord">0.2126</span><span class="mspace" style="margin-right:0.2222em"></span><span class="mbin">×</span><span class="mspace" style="margin-right:0.2222em"></span></span><span class="base"><span class="strut" style="height:0.8333em;vertical-align:-0.15em"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.00773em">R</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3361em"><span style="top:-2.55em;margin-left:-0.0077em;margin-right:0.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.01968em">l</span><span class="mord mathnormal mtight">in</span><span class="mord mathnormal mtight">e</span><span class="mord mathnormal mtight">a</span><span class="mord mathnormal mtight" style="margin-right:0.02778em">r</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222em"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em"></span></span><span class="base"><span class="strut" style="height:0.7278em;vertical-align:-0.0833em"></span><span class="mord">0.7152</span><span class="mspace" style="margin-right:0.2222em"></span><span class="mbin">×</span><span class="mspace" style="margin-right:0.2222em"></span></span><span class="base"><span class="strut" style="height:0.8333em;vertical-align:-0.15em"></span><span class="mord"><span class="mord mathnormal">G</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3361em"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.01968em">l</span><span class="mord mathnormal mtight">in</span><span class="mord mathnormal mtight">e</span><span class="mord mathnormal mtight">a</span><span class="mord mathnormal mtight" style="margin-right:0.02778em">r</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222em"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em"></span></span><span class="base"><span class="strut" style="height:0.7278em;vertical-align:-0.0833em"></span><span class="mord">0.0722</span><span class="mspace" style="margin-right:0.2222em"></span><span class="mbin">×</span><span class="mspace" style="margin-right:0.2222em"></span></span><span class="base"><span class="strut" style="height:0.8333em;vertical-align:-0.15em"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.05017em">B</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3361em"><span style="top:-2.55em;margin-left:-0.0502em;margin-right:0.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.01968em">l</span><span class="mord mathnormal mtight">in</span><span class="mord mathnormal mtight">e</span><span class="mord mathnormal mtight">a</span><span class="mord mathnormal mtight" style="margin-right:0.02778em">r</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em"><span></span></span></span></span></span></span></span></span></span></span></div><p>可以通过图像颜色通道的线性组合获得亮度。使用广播的策略，代码可以写成如下：</p><div class="language-python codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-python codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">gray </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> np</span><span class="token punctuation" style="color:#393A34">.</span><span class="token builtin">sum</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">im</span><span class="token operator" style="color:#393A34">*</span><span class="token punctuation" style="color:#393A34">[</span><span class="token number" style="color:#36acaa">0.2126</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0.7152</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0.0722</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> axis</span><span class="token operator" style="color:#393A34">=</span><span class="token number" style="color:#36acaa">2</span><span class="token punctuation" style="color:#393A34">)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>其中<strong>im</strong>是一张RGB标准图片的数组值，</p><blockquote><p>im.shape == (1080, 1920, 3)</p></blockquote><blockquote><p>gray.shape == (1080, 1920)</p></blockquote><p>1080是图片的高度， 1920是图片的宽度，3是图片RGB的三个通道。
(关于图片的格式，请阅读<a href="https://zhuanlan.zhihu.com/p/95952096" target="_blank" rel="noopener noreferrer">图像格式RGB/HSV/YUV</a>)</p><p>完整代码如下：</p><div class="language-python codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-python codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv codeBlockLinesWithNumbering_o6Pm"><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> numpy </span><span class="token keyword" style="color:#00009f">as</span><span class="token plain"> np</span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain"></span><span class="token keyword" style="color:#00009f">from</span><span class="token plain"> matplotlib</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">pyplot </span><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> imread</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> imsave</span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain" style="display:inline-block"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">a </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> imread</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&#x27;python-logo.png&#x27;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">b </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> np</span><span class="token punctuation" style="color:#393A34">.</span><span class="token builtin">sum</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">a</span><span class="token operator" style="color:#393A34">*</span><span class="token punctuation" style="color:#393A34">[</span><span class="token number" style="color:#36acaa">0.2126</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0.7152</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0.0722</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> axis</span><span class="token operator" style="color:#393A34">=</span><span class="token number" style="color:#36acaa">2</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">imsave</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&#x27;logo-gray.png&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> b</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> cmap</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">&#x27;gray&#x27;</span><span class="token punctuation" style="color:#393A34">)</span></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>原始图片地址：<a href="http://openastronomy.org/pyastro/logo/" target="_blank" rel="noopener noreferrer">http://openastronomy.org/pyastro/logo/</a></p><p>执行灰度操作以后的效果：</p><p><img loading="lazy" src="/math201/assets/images/numpy-broadcast-05-c6bee92b018d90f603e8a5c17478bbd3.png" width="816" height="335" class="img_ev3q"></p></div></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages navigation"><a class="pagination-nav__link pagination-nav__link--prev" href="/math201/python/numpy/tensor"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">4. 张量(Tensor): 多维数组</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/math201/python/numpy/exercises"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">6. 练习题</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#1-什么是广播" class="table-of-contents__link toc-highlight">1. 什么是广播?</a></li><li><a href="#2-广播的规则" class="table-of-contents__link toc-highlight">2. 广播的规则</a><ul><li><a href="#示例1" class="table-of-contents__link toc-highlight">示例1</a></li><li><a href="#示例2" class="table-of-contents__link toc-highlight">示例2</a></li><li><a href="#示例3" class="table-of-contents__link toc-highlight">示例3</a></li></ul></li><li><a href="#3-实际案例" class="table-of-contents__link toc-highlight">3. 实际案例</a></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="footer__bottom text--center"><div class="footer__copyright"><div>本网站仅供教学使用，自创内容采用<a href="https://creativecommons.org/licenses/by-nc-sa/4.0/deed.zh">CC BY-NC-SA 4.0 CN</a>许可协议发布，其他借鉴参考内容许可协议请参考原文许可协议。<div></div></div></div></div></div></footer></div>
<script src="/math201/assets/js/runtime~main.7ddc3c1c.js"></script>
<script src="/math201/assets/js/main.6f42869f.js"></script>
</body>
</html>